{"version":3,"sources":["webpack:///./src/components/disc/index.vue?ba97","webpack:///src/components/disc/index.vue","webpack:///./src/components/disc/index.vue?1b37","webpack:///./src/components/disc/index.vue","webpack:///./src/api/recommend.js","webpack:///./src/components/music-list/index.vue?dd52","webpack:///./src/components/disc/index.vue?10cc","webpack:///./src/components/music-list/index.vue?6a09","webpack:///src/components/music-list/index.vue","webpack:///./src/components/music-list/index.vue?1c04","webpack:///./src/components/music-list/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","name","title","bgImage","songs","staticRenderFns","discvue_type_script_lang_js_","data","computed","_objectSpread","disc","dissname","imgurl","Object","vuex_esm","created","_getDiscSong","methods","_this","dissid","recommend","then","res","code","_normalizeSongs","cdlist","songlist","$router","push","list","ret","forEach","item","musicData","songid","id","songmid","mid","singer","songname","albumname","album","interval","albummid","song","components","MusicList","music_list","components_discvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","__webpack_require__","d","getBanner","getSongList","getDiscSong","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","n","_config__WEBPACK_IMPORTED_MODULE_1__","url","baseUrl","assign","commonParams","uin","platform","needNewCode","axios","get","params","Promise","resolve","picmid","rnd","Math","random","loginUin","hostUin","categoryId","sortId","sin","ein","disstid","type","json","utf8","onlysong","new_format","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_04d3fe18_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_04d3fe18_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0___default","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_9aaafc6e_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_9aaafc6e_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0___default","staticClass","on","click","back","domProps","innerHTML","_s","ref","style","directives","rawName","value","length","expression","_v","rank","select","selectItem","refresh","core_esm","use","pull_up_esm","music_listvue_type_script_lang_js_","mixins","mixin","bscroll","minTranslateY","props","String","default","Array","Boolean","bgStyle","concat","mounted","_initScroll","$refs","top","clientHeight","scrollY","pullUpLoad","probeType","onScroll","pullingUpHandler","randomPlay","pos","layer","transform","y","zIndex","scale","blur","percent","abs","min","height","paddingTop","filter","$emit","finishPullUp","index","selectPlay","handlePlayList","playlist","bottom","beforeDestroy","destroy","watch","setTimeout","SongList","song_list","Loading","loading","components_music_listvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-6ea0fb48.9e53b41c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"title\":_vm.title,\"bgImage\":_vm.bgImage,\"songs\":_vm.songs}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slide\">\r\n    <music-list :title=\"title\" :bgImage=\"bgImage\" :songs=\"songs\"></music-list>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport MusicList from \"components/music-list/index\";\r\nimport { getDiscSong } from \"api/recommend\";\r\nimport { mapGetters } from \"vuex\";\r\nimport { createSong } from \"common/js/song\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      songs: []\r\n    };\r\n  },\r\n  computed: {\r\n    title() {\r\n      return this.disc.dissname;\r\n    },\r\n    bgImage() {\r\n      return this.disc.imgurl;\r\n    },\r\n    ...mapGetters([\"disc\"])\r\n  },\r\n  created() {\r\n    this._getDiscSong();\r\n  },\r\n  methods: {\r\n    _getDiscSong() {\r\n      if (!this.disc.dissid) {\r\n        this.$router.push(\"/recommend\");\r\n        return\r\n      }\r\n      getDiscSong(this.disc.dissid).then(res => {\r\n        if (res.code === 0) {\r\n          this.songs = this._normalizeSongs(res.cdlist[0].songlist);\r\n        }\r\n      });\r\n    },\r\n    // 标准化歌曲数据\r\n    _normalizeSongs(list) {\r\n      let ret = [];\r\n      list.forEach(item => {\r\n        let musicData = {};\r\n        musicData.songid = item.id;\r\n        musicData.songmid = item.mid;\r\n        musicData.singer = item.singer;\r\n        musicData.songname = item.name;\r\n        musicData.albumname = item.album.name;\r\n        musicData.interval = item.interval;\r\n        musicData.albummid = item.album.mid;\r\n        ret.push(createSong(musicData));\r\n      });\r\n      return ret;\r\n    }\r\n  },\r\n  components: {\r\n    MusicList\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable';\r\n\r\n.slide-enter-active, .slide-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.slide-enter, .slide-leave-to {\r\n  transform: translate3d(100%, 0, 0);\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=9aaafc6e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=9aaafc6e&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9aaafc6e\",\n  null\n  \n)\n\nexport default component.exports","import axios from 'axios'\r\nimport {\r\n  commonParams,\r\n  baseUrl\r\n} from './config'\r\n\r\n// 获取轮播图的数据\r\nexport function getBanner() {\r\n  const url = baseUrl + 'api/getBanner'\r\n  const data = Object.assign({}, commonParams, {\r\n    uin: 0,\r\n    platform: 'h5',\r\n    needNewCode: 1\r\n  })\r\n  return axios.get(url, {\r\n    params: data\r\n  }).then(res => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n}\r\n\r\n// 获取歌单数据\r\nexport function getSongList() {\r\n  const url = baseUrl + 'api/getSongList'\r\n  const data = Object.assign({}, commonParams, {\r\n    picmid: 1,\r\n    rnd: Math.random(),\r\n    loginUin: 0,\r\n    hostUin: 0,\r\n    platform: 'yqq.json',\r\n    needNewCode: 0,\r\n    categoryId: 10000000,\r\n    sortId: 5,\r\n    sin: 0,\r\n    ein: 19\r\n  })\r\n  return axios.get(url, {\r\n    params: data\r\n  }).then(res => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n}\r\n\r\n// 获取歌单详细歌曲\r\nexport function getDiscSong(disstid) {\r\n  const url =  baseUrl +'api/getDiscSong'\r\n  const data = Object.assign({}, commonParams, {\r\n    type: 1,\r\n    json: 1,\r\n    utf8: 1,\r\n    onlysong: 0,\r\n    new_format: 1,\r\n    disstid: disstid,\r\n    loginUin: 0,\r\n    hostUin: 0,\r\n    platform: 'yqq.json',\r\n    needNewCode: 0,\r\n  })\r\n  return axios.get(url, {\r\n    params: data\r\n  }).then(res => {\r\n    return Promise.resolve(res.data)\r\n  })\r\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=04d3fe18&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=04d3fe18&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=9aaafc6e&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=9aaafc6e&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length>0),expression:\"songs.length>0\"}],ref:\"playBtn\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])]),_c('div',{staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('div',{ref:\"list\",staticClass:\"list\"},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"songs\":_vm.songs,\"rank\":_vm.rank},on:{\"select\":_vm.selectItem}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length || _vm.refresh),expression:\"!songs.length || refresh\"}],staticClass:\"loading-container\"},[_c('loading')],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\" v-html=\"title\"></h1>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" v-show=\"songs.length>0\" ref=\"playBtn\" @click=\"random\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <div class=\"list\" ref=\"list\">\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list :songs=\"songs\" @select=\"selectItem\" :rank=\"rank\"></song-list>\r\n      </div>\r\n      <div class=\"loading-container\" v-show=\"!songs.length || refresh\">\r\n        <loading></loading>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SongList from \"base/song-list/index\";\r\nimport BScroll from \"@better-scroll/core\";\r\nimport Loading from \"base/loading/index\";\r\nimport PullUp from \"@better-scroll/pull-up\";\r\nimport { playlistMixin } from \"common/js/mixin\";\r\nimport { mapActions } from \"vuex\";\r\nBScroll.use(PullUp);\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  data() {\r\n    return {\r\n      bscroll: null,\r\n      minTranslateY: 0\r\n    };\r\n  },\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    refresh: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image:url(${this.bgImage})`;\r\n    }\r\n  },\r\n  mounted() {\r\n    this._initScroll();\r\n  },\r\n  methods: {\r\n    _initScroll() {\r\n      // 列表在图片下面\r\n      this.$refs.list.style.top = `${this.$refs.bgImage.clientHeight}px`;\r\n      // 确定推到最顶值\r\n      this.minTranslateY = -this.$refs.bgImage.clientHeight + 40;\r\n      // 初始化scroll组件 probeType实时监测\r\n      this.bscroll = new BScroll(this.$refs.list, {\r\n        scrollY: true,\r\n        click: true,\r\n        pullUpLoad: true,\r\n        probeType: 3\r\n      });\r\n      // 监听滚动事件\r\n      this.bscroll.on(\"scroll\", this.onScroll);\r\n      // 监听上拉事件\r\n      this.bscroll.on(\"pullingUp\", this.pullingUpHandler);\r\n    },\r\n    random() {\r\n      this.randomPlay({\r\n        list: this.songs\r\n      });\r\n    },\r\n    back() {\r\n      this.$router.back();\r\n    },\r\n    onScroll(pos) {\r\n      // 让列表跟随scroll一起动\r\n      this.$refs.layer.style.transform = `translate3d(0,${pos.y}px,0)`;\r\n      let zIndex = 0;\r\n      let scale = 1;\r\n      let blur = 0;\r\n      // 图片缩放、模糊比例\r\n      const percent = Math.abs(pos.y / this.$refs.bgImage.clientHeight);\r\n      if (pos.y > 0) {\r\n        zIndex = 10;\r\n        scale = 1 + percent;\r\n      } else {\r\n        blur = Math.min(10, percent * 7);\r\n      }\r\n      // scroll情况判定\r\n      if (pos.y > this.minTranslateY) {\r\n        this.$refs.bgImage.style.height = \"0px\";\r\n        this.$refs.bgImage.style.paddingTop = \"70%\";\r\n      } else {\r\n        this.$refs.bgImage.style.height = \"40px\";\r\n        this.$refs.bgImage.style.paddingTop = 0;\r\n        zIndex = 10;\r\n        blur = 5;\r\n      }\r\n      this.$refs.bgImage.style.zIndex = zIndex;\r\n      this.$refs.bgImage.style.transform = `scale(${scale})`;\r\n      this.$refs.bgImage.style.filter = `blur(${blur}px)`;\r\n    },\r\n    pullingUpHandler() {\r\n      // 防止快速刷新 不是最佳方案\r\n      if (!this.refresh) {\r\n        this.$emit(\"pullData\");\r\n        this.bscroll.finishPullUp();\r\n      }\r\n    },\r\n    // 子组件的派发事件\r\n    selectItem(song, index) {\r\n      this.selectPlay({\r\n        list: this.songs,\r\n        index: index\r\n      });\r\n    },\r\n    // mixin 处理 滚动刷新\r\n    handlePlayList(playlist) {\r\n      const bottom = playlist.length > 0 ? \"60px\" : \"\";\r\n      this.$refs.list.style.bottom = bottom;\r\n      if (this.bscroll) this.bscroll.refresh();\r\n    },\r\n    ...mapActions([\"selectPlay\", \"randomPlay\"])\r\n  },\r\n  // 销毁scroll\r\n  beforeDestroy() {\r\n    if (this.bscroll) this.bscroll.destroy();\r\n  },\r\n  watch: {\r\n    songs() {\r\n      setTimeout(() => {\r\n        this.bscroll.refresh();\r\n      }, 20);\r\n    }\r\n  },\r\n  components: {\r\n    SongList,\r\n    Loading\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable';\r\n@import '~common/stylus/mixin';\r\n\r\n.music-list {\r\n  position: fixed;\r\n  z-index: 100;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  background: $color-background;\r\n\r\n  .back {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 6px;\r\n    z-index: 50;\r\n\r\n    .icon-back {\r\n      display: block;\r\n      padding: 10px;\r\n      font-size: $font-size-large-x;\r\n      color: $color-theme;\r\n    }\r\n  }\r\n\r\n  .title {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 10%;\r\n    z-index: 40;\r\n    width: 80%;\r\n    no-wrap();\r\n    text-align: center;\r\n    line-height: 40px;\r\n    font-size: $font-size-large;\r\n    color: $color-text;\r\n  }\r\n\r\n  .bg-image {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-top: 70%;\r\n    transform-origin: top;\r\n    background-size: cover;\r\n\r\n    .play-wrapper {\r\n      position: absolute;\r\n      bottom: 20px;\r\n      z-index: 50;\r\n      width: 100%;\r\n\r\n      .play {\r\n        box-sizing: border-box;\r\n        width: 135px;\r\n        padding: 7px 0;\r\n        margin: 0 auto;\r\n        text-align: center;\r\n        border: 1px solid $color-theme;\r\n        color: $color-theme;\r\n        border-radius: 100px;\r\n        font-size: 0;\r\n\r\n        .icon-play {\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          margin-right: 6px;\r\n          font-size: $font-size-medium-x;\r\n        }\r\n\r\n        .text {\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          font-size: $font-size-small;\r\n        }\r\n      }\r\n    }\r\n\r\n    .filter {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: rgba(7, 17, 27, 0.3);\r\n    }\r\n  }\r\n\r\n  .bg-layer {\r\n    position: relative;\r\n    height: 100%;\r\n    background: $color-background;\r\n  }\r\n\r\n  .list {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    background: $color-background;\r\n\r\n    .song-list-wrapper {\r\n      padding: 20px 30px;\r\n    }\r\n\r\n    .loading-container {\r\n      position: absolute;\r\n      width: 100%;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=04d3fe18&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=04d3fe18&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04d3fe18\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}