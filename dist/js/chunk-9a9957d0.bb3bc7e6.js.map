{"version":3,"sources":["webpack:///./src/components/user-center/index.vue?fe60","webpack:///src/components/user-center/index.vue","webpack:///./src/components/user-center/index.vue?2238","webpack:///./src/components/user-center/index.vue","webpack:///./src/components/user-center/index.vue?2925"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","name","staticClass","on","click","back","switches","currentIndex","switch","switchItem","ref","random","_v","songs","favoriteList","select","selectSong","_e","playHistory","directives","rawName","value","expression","title","noResultTitle","staticRenderFns","core_esm","use","scroll_bar_esm","user_centervue_type_script_lang_js_","mixins","mixin","data","bscroll","mounted","_initBscroll","computed","_objectSpread","noResult","length","playList","Object","vuex_esm","methods","$router","$refs","listScroll","scrollY","probeType","scrollbar","song","insertSong","js_song","index","_this","setTimeout","refresh","list","map","randomPlay","handlePlayList","bottom","listWrapper","style","watch","_this2","_this3","components","Switches","SongList","song_list","NoResult","no_result","components_user_centervue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_0a80fc1d_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_0a80fc1d_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"yHAAA,IAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,cAAwBE,MAAA,CAAOC,KAAA,UAAgB,CAAAH,EAAA,OAAYI,YAAA,eAA0B,CAAAJ,EAAA,OAAYI,YAAA,OAAAC,GAAA,CAAuBC,MAAAV,EAAAW,OAAkB,CAAAP,EAAA,KAAUI,YAAA,gBAAwBJ,EAAA,OAAcI,YAAA,oBAA+B,CAAAJ,EAAA,YAAiBE,MAAA,CAAOM,SAAAZ,EAAAY,SAAAC,aAAAb,EAAAa,cAAwDJ,GAAA,CAAKK,OAAAd,EAAAe,eAAyB,GAAAX,EAAA,OAAgBY,IAAA,UAAAR,YAAA,WAAAC,GAAA,CAAyCC,MAAAV,EAAAiB,SAAoB,CAAAb,EAAA,KAAUI,YAAA,cAAwBJ,EAAA,QAAaI,YAAA,QAAmB,CAAAR,EAAAkB,GAAA,cAAAd,EAAA,OAAiCY,IAAA,cAAAR,YAAA,gBAA6C,KAAAR,EAAAa,aAAAT,EAAA,OAAqCY,IAAA,aAAAR,YAAA,eAA2C,CAAAJ,EAAA,OAAYI,YAAA,cAAyB,CAAAJ,EAAA,aAAkBE,MAAA,CAAOa,MAAAnB,EAAAoB,cAAyBX,GAAA,CAAKY,OAAArB,EAAAsB,eAAyB,KAAAtB,EAAAuB,KAAA,IAAAvB,EAAAa,aAAAT,EAAA,OAAoDY,IAAA,aAAAR,YAAA,eAA2C,CAAAJ,EAAA,OAAYI,YAAA,cAAyB,CAAAJ,EAAA,aAAkBE,MAAA,CAAOa,MAAAnB,EAAAwB,aAAwBf,GAAA,CAAKY,OAAArB,EAAAsB,eAAyB,KAAAtB,EAAAuB,OAAAnB,EAAA,OAA6BqB,WAAA,EAAalB,KAAA,OAAAmB,QAAA,SAAAC,MAAA3B,EAAA,SAAA4B,WAAA,aAAwEpB,YAAA,qBAAkC,CAAAJ,EAAA,aAAkBE,MAAA,CAAOuB,MAAA7B,EAAA8B,kBAA2B,QAC7tCC,EAAA,qsBCsCAC,EAAA,KAAAC,IAAAC,EAAA,MAIA,IAAAC,EAAA,CACAC,OAAA,CAAAC,EAAA,MACAC,KAFA,WAGA,OACAzB,aAAA,EACAD,SAAA,EAAAL,KAAA,SAAAA,KAAA,SACAgC,QAAA,OAGAC,QATA,WAWAvC,KAAAwC,gBAEAC,SAAAC,EAAA,CACAC,SADA,WAEA,WAAA3C,KAAAY,cAAAZ,KAAAmB,aAAAyB,QACA5C,KAAA6C,SAAAD,QAEAf,cALA,WAMA,WAAA7B,KAAAY,aAAA,SACA,YAEAkC,OAAAC,EAAA,KAAAD,CAAA,iCAEAE,QAAAN,EAAA,CACAhC,KADA,WAEAV,KAAAiD,QAAAvC,QAEA8B,aAJA,WAKAxC,KAAAsC,QAAA,IAAAP,EAAA,KAAA/B,KAAAkD,MAAAC,WAAA,CACAC,SAAA,EACAC,UAAA,EACAC,WAAA,EACA7C,OAAA,KAGAY,WAZA,SAYAkC,GACAvD,KAAAwD,WAAA,IAAAC,EAAA,KAAAF,KAGAzC,WAhBA,SAgBA4C,GAAA,IAAAC,EAAA3D,KACAA,KAAAY,aAAA8C,EACAE,WAAA,WACAD,EAAArB,QAAAuB,WACA,KAGA7C,OAvBA,WAwBA,IAAA8C,EAAA,IAAA9D,KAAAY,aAAAZ,KAAAmB,aAAAnB,KAAAuB,YACA,IAAAuC,EAAAlB,SACAkB,IAAAC,IAAA,SAAAR,GACA,WAAAE,EAAA,KAAAF,KAEAvD,KAAAgE,WAAA,CACAF,WAGAG,eAjCA,SAiCApB,GACA,IAAAqB,EAAArB,EAAAD,OAAA,YACA5C,KAAAkD,MAAAiB,YAAAC,MAAAF,SACAlE,KAAAsC,SAAAtC,KAAAsC,QAAAuB,YAEAf,OAAAC,EAAA,KAAAD,CAAA,8BAEAuB,MAAA,CACA9C,YADA,WACA,IAAA+C,EAAAtE,KACA4D,WAAA,WACAU,EAAAhC,QAAAuB,WACA,KAEA1C,aANA,WAMA,IAAAoD,EAAAvE,KACA4D,WAAA,WACAW,EAAAjC,QAAAuB,WACA,MAGAW,WAAA,CACAC,SAAA9D,EAAA,KACA+D,SAAAC,EAAA,KACAC,SAAAC,EAAA,OC1H8VC,EAAA,0BCQ9VC,EAAgBjC,OAAAkC,EAAA,KAAAlC,CACdgC,EACAhF,EACAgC,GACF,EACA,KACA,WACA,MAIemD,EAAA,WAAAF,sECnBf,IAAAG,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAilBE,EAAG","file":"js/chunk-9a9957d0.bb3bc7e6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('div',{staticClass:\"user-center\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('div',{staticClass:\"switches-wrapper\"},[_c('switches',{attrs:{\"switches\":_vm.switches,\"currentIndex\":_vm.currentIndex},on:{\"switch\":_vm.switchItem}})],1),_c('div',{ref:\"playBtn\",staticClass:\"play-btn\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])]),_c('div',{ref:\"listWrapper\",staticClass:\"list-wrapper\"},[(_vm.currentIndex === 0)?_c('div',{ref:\"listScroll\",staticClass:\"list-scroll\"},[_c('div',{staticClass:\"list-inner\"},[_c('song-list',{attrs:{\"songs\":_vm.favoriteList},on:{\"select\":_vm.selectSong}})],1)]):_vm._e(),(_vm.currentIndex === 1)?_c('div',{ref:\"listScroll\",staticClass:\"list-scroll\"},[_c('div',{staticClass:\"list-inner\"},[_c('song-list',{attrs:{\"songs\":_vm.playHistory},on:{\"select\":_vm.selectSong}})],1)]):_vm._e()]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.noResult),expression:\"noResult\"}],staticClass:\"no-result-wrapper\"},[_c('no-result',{attrs:{\"title\":_vm.noResultTitle}})],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slide\">\r\n    <div class=\"user-center\">\r\n      <div class=\"back\" @click=\"back\">\r\n        <i class=\"icon-back\"></i>\r\n      </div>\r\n      <div class=\"switches-wrapper\">\r\n        <switches :switches=\"switches\" :currentIndex=\"currentIndex\" @switch=\"switchItem\"></switches>\r\n      </div>\r\n      <div class=\"play-btn\" ref=\"playBtn\" @click=\"random\">\r\n        <i class=\"icon-play\"></i>\r\n        <span class=\"text\">随机播放全部</span>\r\n      </div>\r\n      <div class=\"list-wrapper\" ref=\"listWrapper\">\r\n        <div class=\"list-scroll\" ref=\"listScroll\" v-if=\"currentIndex === 0\">\r\n          <div class=\"list-inner\">\r\n            <song-list :songs=\"favoriteList\" @select=\"selectSong\"></song-list>\r\n          </div>\r\n        </div>\r\n        <div class=\"list-scroll\" ref=\"listScroll\" v-if=\"currentIndex === 1\">\r\n          <div class=\"list-inner\">\r\n            <song-list :songs=\"playHistory\" @select=\"selectSong\"></song-list>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"no-result-wrapper\" v-show=\"noResult\">\r\n        <no-result :title=\"noResultTitle\"></no-result>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport Switches from \"base/switches/index\";\r\nimport SongList from \"base/song-list/index\";\r\nimport BScroll from \"@better-scroll/core\";\r\nimport ScrollBar from \"@better-scroll/scroll-bar\";\r\nimport NoResult from \"base/no-result/index\";\r\nimport Song from \"common/js/song\";\r\nBScroll.use(ScrollBar);\r\nimport { mapGetters, mapActions } from \"vuex\";\r\nimport { playlistMixin } from \"common/js/mixin\";\r\n\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  data() {\r\n    return {\r\n      currentIndex: 0,\r\n      switches: [{ name: \"我喜欢的\" }, { name: \"最近听的\" }],\r\n      bscroll: null\r\n    };\r\n  },\r\n  mounted() {\r\n    // 初始化滑动组件\r\n    this._initBscroll();\r\n  },\r\n  computed: {\r\n    noResult() {\r\n      if (this.currentIndex === 0) return !this.favoriteList.length;\r\n      else return !this.playList.length;\r\n    },\r\n    noResultTitle() {\r\n      if (this.currentIndex === 0) return \"没有收藏歌曲\";\r\n      else return \"没有听过的歌曲\";\r\n    },\r\n    ...mapGetters([\"favoriteList\", \"playHistory\"])\r\n  },\r\n  methods: {\r\n    back() {\r\n      this.$router.back();\r\n    },\r\n    _initBscroll() {\r\n      this.bscroll = new BScroll(this.$refs.listScroll, {\r\n        scrollY: true,\r\n        probeType: 1,\r\n        scrollbar: true,\r\n        click: true\r\n      });\r\n    },\r\n    selectSong(song) {\r\n      this.insertSong(new Song(song));\r\n    },\r\n    // 切换tag\r\n    switchItem(index) {\r\n      this.currentIndex = index;\r\n      setTimeout(() => {\r\n        this.bscroll.refresh();\r\n      }, 20);\r\n    },\r\n    // 随机播放\r\n    random() {\r\n      let list = this.currentIndex === 0 ? this.favoriteList : this.playHistory;\r\n      if (list.length === 0) return;\r\n      list = list.map(song => {\r\n        return new Song(song);\r\n      });\r\n      this.randomPlay({\r\n        list\r\n      });\r\n    },\r\n    handlePlayList(playList) {\r\n      const bottom = playList.length > 0 ? \"60px\" : \"\";\r\n      this.$refs.listWrapper.style.bottom = bottom;\r\n      if (this.bscroll) this.bscroll.refresh();\r\n    },\r\n    ...mapActions([\"insertSong\", \"randomPlay\"])\r\n  },\r\n  watch: {\r\n    playHistory() {\r\n      setTimeout(() => {\r\n        this.bscroll.refresh();\r\n      }, 20);\r\n    },\r\n    favoriteList() {\r\n      setTimeout(() => {\r\n        this.bscroll.refresh();\r\n      }, 20);\r\n    }\r\n  },\r\n  components: {\r\n    Switches,\r\n    SongList,\r\n    NoResult\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable';\r\n\r\n.user-center {\r\n  position: fixed;\r\n  top: 0;\r\n  bottom: 0;\r\n  z-index: 100;\r\n  width: 100%;\r\n  background: $color-background;\r\n\r\n  &.slide-enter-active, &.slide-leave-active {\r\n    transition: all 0.3s;\r\n  }\r\n\r\n  &.slide-enter, &.slide-leave-to {\r\n    transform: translate3d(100%, 0, 0);\r\n  }\r\n\r\n  .back {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 6px;\r\n    z-index: 50;\r\n\r\n    .icon-back {\r\n      display: block;\r\n      padding: 10px;\r\n      font-size: $font-size-large-x;\r\n      color: $color-theme;\r\n    }\r\n  }\r\n\r\n  .switches-wrapper {\r\n    margin: 10px 0 30px 0;\r\n  }\r\n\r\n  .play-btn {\r\n    box-sizing: border-box;\r\n    width: 135px;\r\n    padding: 7px 0;\r\n    margin: 0 auto;\r\n    text-align: center;\r\n    border: 1px solid $color-text-l;\r\n    color: $color-text-l;\r\n    border-radius: 100px;\r\n    font-size: 0;\r\n\r\n    .icon-play {\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n      margin-right: 6px;\r\n      font-size: $font-size-medium-x;\r\n    }\r\n\r\n    .text {\r\n      display: inline-block;\r\n      vertical-align: middle;\r\n      font-size: $font-size-small;\r\n    }\r\n  }\r\n\r\n  .list-wrapper {\r\n    position: absolute;\r\n    top: 110px;\r\n    bottom: 0;\r\n    width: 100%;\r\n\r\n    .list-scroll {\r\n      height: 100%;\r\n      overflow: hidden;\r\n\r\n      .list-inner {\r\n        padding: 20px 30px;\r\n      }\r\n    }\r\n  }\r\n\r\n  .no-result-wrapper {\r\n    position: absolute;\r\n    width: 100%;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0a80fc1d&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0a80fc1d&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0a80fc1d\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0a80fc1d&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=0a80fc1d&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\""],"sourceRoot":""}