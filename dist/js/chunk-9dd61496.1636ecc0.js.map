{"version":3,"sources":["webpack:///./src/components/music-list/index.vue?dd52","webpack:///./src/components/singer-detail/index.vue?b08b","webpack:///./src/components/music-list/index.vue?6a09","webpack:///src/components/music-list/index.vue","webpack:///./src/components/music-list/index.vue?1c04","webpack:///./src/components/music-list/index.vue","webpack:///./src/components/singer-detail/index.vue?c7b8","webpack:///src/components/singer-detail/index.vue","webpack:///./src/components/singer-detail/index.vue?b683","webpack:///./src/components/singer-detail/index.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_04d3fe18_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_04d3fe18_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0___default","n","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_4b7b1fb8_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_11_oneOf_1_0_node_modules_css_loader_index_js_ref_11_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_11_oneOf_1_2_node_modules_stylus_loader_index_js_ref_11_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_index_vue_vue_type_style_index_0_id_4b7b1fb8_scoped_true_lang_stylus_rel_stylesheet_2Fstylus___WEBPACK_IMPORTED_MODULE_0___default","render","_vm","this","_h","$createElement","_c","_self","staticClass","on","click","back","domProps","innerHTML","_s","title","ref","style","directives","name","rawName","value","songs","length","expression","random","_v","attrs","rank","select","selectItem","refresh","staticRenderFns","core_esm","use","pull_up_esm","music_listvue_type_script_lang_js_","mixins","mixin","data","bscroll","minTranslateY","props","bgImage","type","String","default","Array","Boolean","computed","bgStyle","concat","mounted","_initScroll","methods","_objectSpread","$refs","list","top","clientHeight","scrollY","pullUpLoad","probeType","onScroll","pullingUpHandler","randomPlay","$router","pos","layer","transform","y","zIndex","scale","blur","percent","Math","abs","min","height","paddingTop","filter","$emit","finishPullUp","song","index","selectPlay","handlePlayList","playlist","bottom","Object","vuex_esm","beforeDestroy","destroy","watch","_this","setTimeout","components","SongList","song_list","Loading","loading","components_music_listvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","pullData","singer_detailvue_type_script_lang_js_","num","singer","singer_name","singer_pic","created","_getSingerSongs","then","res","code","_normalizeSongs","ret","forEach","item","musicData","push","_this2","MusicList","music_list","components_singer_detailvue_type_script_lang_js_"],"mappings":"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","file":"js/chunk-9dd61496.1636ecc0.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=04d3fe18&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=04d3fe18&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4b7b1fb8&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/stylus-loader/index.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4b7b1fb8&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"music-list\"},[_c('div',{staticClass:\"back\",on:{\"click\":_vm.back}},[_c('i',{staticClass:\"icon-back\"})]),_c('h1',{staticClass:\"title\",domProps:{\"innerHTML\":_vm._s(_vm.title)}}),_c('div',{ref:\"bgImage\",staticClass:\"bg-image\",style:(_vm.bgStyle)},[_c('div',{staticClass:\"play-wrapper\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.songs.length>0),expression:\"songs.length>0\"}],ref:\"playBtn\",staticClass:\"play\",on:{\"click\":_vm.random}},[_c('i',{staticClass:\"icon-play\"}),_c('span',{staticClass:\"text\"},[_vm._v(\"随机播放全部\")])])]),_c('div',{staticClass:\"filter\"})]),_c('div',{ref:\"layer\",staticClass:\"bg-layer\"}),_c('div',{ref:\"list\",staticClass:\"list\"},[_c('div',{staticClass:\"song-list-wrapper\"},[_c('song-list',{attrs:{\"songs\":_vm.songs,\"rank\":_vm.rank},on:{\"select\":_vm.selectItem}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.songs.length || _vm.refresh),expression:\"!songs.length || refresh\"}],staticClass:\"loading-container\"},[_c('loading')],1)])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"music-list\">\r\n    <div class=\"back\" @click=\"back\">\r\n      <i class=\"icon-back\"></i>\r\n    </div>\r\n    <h1 class=\"title\" v-html=\"title\"></h1>\r\n    <div class=\"bg-image\" :style=\"bgStyle\" ref=\"bgImage\">\r\n      <div class=\"play-wrapper\">\r\n        <div class=\"play\" v-show=\"songs.length>0\" ref=\"playBtn\" @click=\"random\">\r\n          <i class=\"icon-play\"></i>\r\n          <span class=\"text\">随机播放全部</span>\r\n        </div>\r\n      </div>\r\n      <div class=\"filter\"></div>\r\n    </div>\r\n    <div class=\"bg-layer\" ref=\"layer\"></div>\r\n    <div class=\"list\" ref=\"list\">\r\n      <div class=\"song-list-wrapper\">\r\n        <song-list :songs=\"songs\" @select=\"selectItem\" :rank=\"rank\"></song-list>\r\n      </div>\r\n      <div class=\"loading-container\" v-show=\"!songs.length || refresh\">\r\n        <loading></loading>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SongList from \"base/song-list/index\";\r\nimport BScroll from \"@better-scroll/core\";\r\nimport Loading from \"base/loading/index\";\r\nimport PullUp from \"@better-scroll/pull-up\";\r\nimport { playlistMixin } from \"common/js/mixin\";\r\nimport { mapActions } from \"vuex\";\r\nBScroll.use(PullUp);\r\nexport default {\r\n  mixins: [playlistMixin],\r\n  data() {\r\n    return {\r\n      bscroll: null,\r\n      minTranslateY: 0\r\n    };\r\n  },\r\n  props: {\r\n    bgImage: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    songs: {\r\n      type: Array,\r\n      default: () => []\r\n    },\r\n    title: {\r\n      type: String,\r\n      default: \"\"\r\n    },\r\n    rank: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    refresh: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  computed: {\r\n    bgStyle() {\r\n      return `background-image:url(${this.bgImage})`;\r\n    }\r\n  },\r\n  mounted() {\r\n    this._initScroll();\r\n  },\r\n  methods: {\r\n    _initScroll() {\r\n      // 列表在图片下面\r\n      this.$refs.list.style.top = `${this.$refs.bgImage.clientHeight}px`;\r\n      // 确定推到最顶值\r\n      this.minTranslateY = -this.$refs.bgImage.clientHeight + 40;\r\n      // 初始化scroll组件 probeType实时监测\r\n      this.bscroll = new BScroll(this.$refs.list, {\r\n        scrollY: true,\r\n        click: true,\r\n        pullUpLoad: true,\r\n        probeType: 3\r\n      });\r\n      // 监听滚动事件\r\n      this.bscroll.on(\"scroll\", this.onScroll);\r\n      // 监听上拉事件\r\n      this.bscroll.on(\"pullingUp\", this.pullingUpHandler);\r\n    },\r\n    random() {\r\n      this.randomPlay({\r\n        list: this.songs\r\n      });\r\n    },\r\n    back() {\r\n      this.$router.back();\r\n    },\r\n    onScroll(pos) {\r\n      // 让列表跟随scroll一起动\r\n      this.$refs.layer.style.transform = `translate3d(0,${pos.y}px,0)`;\r\n      let zIndex = 0;\r\n      let scale = 1;\r\n      let blur = 0;\r\n      // 图片缩放、模糊比例\r\n      const percent = Math.abs(pos.y / this.$refs.bgImage.clientHeight);\r\n      if (pos.y > 0) {\r\n        zIndex = 10;\r\n        scale = 1 + percent;\r\n      } else {\r\n        blur = Math.min(10, percent * 7);\r\n      }\r\n      // scroll情况判定\r\n      if (pos.y > this.minTranslateY) {\r\n        this.$refs.bgImage.style.height = \"0px\";\r\n        this.$refs.bgImage.style.paddingTop = \"70%\";\r\n      } else {\r\n        this.$refs.bgImage.style.height = \"40px\";\r\n        this.$refs.bgImage.style.paddingTop = 0;\r\n        zIndex = 10;\r\n        blur = 5;\r\n      }\r\n      this.$refs.bgImage.style.zIndex = zIndex;\r\n      this.$refs.bgImage.style.transform = `scale(${scale})`;\r\n      this.$refs.bgImage.style.filter = `blur(${blur}px)`;\r\n    },\r\n    pullingUpHandler() {\r\n      // 防止快速刷新 不是最佳方案\r\n      if (!this.refresh) {\r\n        this.$emit(\"pullData\");\r\n        this.bscroll.finishPullUp();\r\n      }\r\n    },\r\n    // 子组件的派发事件\r\n    selectItem(song, index) {\r\n      this.selectPlay({\r\n        list: this.songs,\r\n        index: index\r\n      });\r\n    },\r\n    // mixin 处理 滚动刷新\r\n    handlePlayList(playlist) {\r\n      const bottom = playlist.length > 0 ? \"60px\" : \"\";\r\n      this.$refs.list.style.bottom = bottom;\r\n      if (this.bscroll) this.bscroll.refresh();\r\n    },\r\n    ...mapActions([\"selectPlay\", \"randomPlay\"])\r\n  },\r\n  // 销毁scroll\r\n  beforeDestroy() {\r\n    if (this.bscroll) this.bscroll.destroy();\r\n  },\r\n  watch: {\r\n    songs() {\r\n      setTimeout(() => {\r\n        this.bscroll.refresh();\r\n      }, 20);\r\n    }\r\n  },\r\n  components: {\r\n    SongList,\r\n    Loading\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable';\r\n@import '~common/stylus/mixin';\r\n\r\n.music-list {\r\n  position: fixed;\r\n  z-index: 100;\r\n  top: 0;\r\n  left: 0;\r\n  bottom: 0;\r\n  right: 0;\r\n  background: $color-background;\r\n\r\n  .back {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 6px;\r\n    z-index: 50;\r\n\r\n    .icon-back {\r\n      display: block;\r\n      padding: 10px;\r\n      font-size: $font-size-large-x;\r\n      color: $color-theme;\r\n    }\r\n  }\r\n\r\n  .title {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 10%;\r\n    z-index: 40;\r\n    width: 80%;\r\n    no-wrap();\r\n    text-align: center;\r\n    line-height: 40px;\r\n    font-size: $font-size-large;\r\n    color: $color-text;\r\n  }\r\n\r\n  .bg-image {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 0;\r\n    padding-top: 70%;\r\n    transform-origin: top;\r\n    background-size: cover;\r\n\r\n    .play-wrapper {\r\n      position: absolute;\r\n      bottom: 20px;\r\n      z-index: 50;\r\n      width: 100%;\r\n\r\n      .play {\r\n        box-sizing: border-box;\r\n        width: 135px;\r\n        padding: 7px 0;\r\n        margin: 0 auto;\r\n        text-align: center;\r\n        border: 1px solid $color-theme;\r\n        color: $color-theme;\r\n        border-radius: 100px;\r\n        font-size: 0;\r\n\r\n        .icon-play {\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          margin-right: 6px;\r\n          font-size: $font-size-medium-x;\r\n        }\r\n\r\n        .text {\r\n          display: inline-block;\r\n          vertical-align: middle;\r\n          font-size: $font-size-small;\r\n        }\r\n      }\r\n    }\r\n\r\n    .filter {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: rgba(7, 17, 27, 0.3);\r\n    }\r\n  }\r\n\r\n  .bg-layer {\r\n    position: relative;\r\n    height: 100%;\r\n    background: $color-background;\r\n  }\r\n\r\n  .list {\r\n    position: fixed;\r\n    top: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    background: $color-background;\r\n\r\n    .song-list-wrapper {\r\n      padding: 20px 30px;\r\n    }\r\n\r\n    .loading-container {\r\n      position: absolute;\r\n      width: 100%;\r\n      top: 50%;\r\n      transform: translateY(-50%);\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=04d3fe18&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=04d3fe18&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"04d3fe18\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('transition',{attrs:{\"name\":\"slide\"}},[_c('music-list',{attrs:{\"songs\":_vm.songs,\"title\":_vm.title,\"bgImage\":_vm.bgImage,\"refresh\":_vm.refresh},on:{\"pullData\":_vm.pullData}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <transition name=\"slide\">\r\n    <music-list\r\n      :songs=\"songs\"\r\n      :title=\"title\"\r\n      :bgImage=\"bgImage\"\r\n      @pullData=\"pullData\"\r\n      :refresh=\"refresh\"\r\n    ></music-list>\r\n  </transition>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters } from \"vuex\";\r\nimport { getSingerSongs } from \"api/singer\";\r\nimport { createSong } from \"common/js/song\";\r\nimport MusicList from \"components/music-list/index\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      num: 0,\r\n      songs: [],\r\n      refresh: false\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters([\"singer\"]),\r\n    title() {\r\n      return this.singer.singer_name;\r\n    },\r\n    bgImage() {\r\n      return this.singer.singer_pic;\r\n    }\r\n  },\r\n  created() {\r\n    // 当前页面刷新时，返回上一级界面\r\n    if (!this.singer.singer_name) this.$router.back();\r\n    this._getSingerSongs();\r\n  },\r\n  methods: {\r\n    // 获取歌手歌曲\r\n    _getSingerSongs() {\r\n      if (this.num < 0) return null;\r\n      // 设置页数，一页15个歌曲返回\r\n      this.singer.num = this.num;\r\n      getSingerSongs(this.singer).then(res => {\r\n        if (res.code === 0) {\r\n          // 获取不到数据时，上拉不再发生请求\r\n          if (res.data.list.length === 0) {\r\n            this.num = -99;\r\n          }\r\n          this.songs = this.songs.concat(this._normalizeSongs(res.data.list));\r\n        }\r\n      });\r\n    },\r\n    // 标准化歌曲数据\r\n    _normalizeSongs(list) {\r\n      let ret = [];\r\n      list.forEach(item => {\r\n        let { musicData } = item;\r\n        ret.push(createSong(musicData));\r\n      });\r\n      return ret;\r\n    },\r\n    // 子组件上拉，获取更多歌曲事件\r\n    pullData() {\r\n      this.refresh = true;\r\n      setTimeout(() => {\r\n        this.refresh = false;\r\n      }, 1000);\r\n      this.num = this.num + 1;\r\n      this._getSingerSongs();\r\n    }\r\n  },\r\n  components: {\r\n    MusicList\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"stylus\" rel=\"stylesheet/stylus\">\r\n@import '~common/stylus/variable';\r\n\r\n.slide-enter-active, .slide-leave-active {\r\n  transition: all 0.3s ease;\r\n}\r\n\r\n.slide-enter, .slide-leave-to {\r\n  transform: translate3d(100%, 0, 0);\r\n}\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4b7b1fb8&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4b7b1fb8&scoped=true&lang=stylus&rel=stylesheet%2Fstylus&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4b7b1fb8\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}